<!DOCTYPE html>
<html lang="en" data-page="contact">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact – Julieta</title>
  <link rel="stylesheet" href="css/style.css" />
  <script src="js/include.js" defer></script>
</head>
<body>
  <!-- Header -->
  <div data-include="header"></div>

  <!-- ===== Hero (배너: 여백 0) ===== -->
  <section class="hero hero--image-only">
    <picture class="hero-picture">
      <source srcset="images/mobile-contact-us-banner.jpg" media="(max-width: 1024px)">
      <img src="images/contact-us-banner.jpg" alt="CONTACT US banner">
    </picture>
  </section>

  <!-- ===== Contact ===== -->
  <section class="container section" id="contact">
    <h2 class="section-title" style="text-align:center">Get in Touch</h2>
    <p class="section-sub" style="text-align:center">Choose your preferred channel</p>

    <!-- Channel Tabs -->
    <div class="contact-tabs" role="tablist" aria-label="Contact channel" style="display:flex;gap:.5rem;justify-content:center;margin:1rem 0 1.5rem">
      <button class="chip is-active" role="tab" aria-selected="true" data-channel="email">
        <span style="display:inline-flex;align-items:center;gap:.5rem">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5Z" fill="currentColor"/></svg>
          Email
        </span>
      </button>
      <button class="chip" role="tab" aria-selected="false" data-channel="whatsapp">
        <span style="display:inline-flex;align-items:center;gap:.5rem">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M16.1 13.3c-.3-.2-1.7-.8-2-.9-.3-.1-.5-.2-.7.2s-.8.9-1 .9-.5 0-.9-.4c-.4-.3-1.4-.1-2.7-1.4-1-1-1.6-2.3-1.8-2.7-.2-.4 0-.6.2-.8.2-.2.4-.5.5-.7.2-.2.2-.4.3-.6 0-.2 0-.5-.1-.7-.1-.2-.7-1.7-1-2.3-.3-.6-.6-.5-.8-.5h-.7c-.2 0-.7.1-1 .5-.3.4-1.3 1.3-1.3 3.2s1.4 3.7 1.6 4 .3.8 1.7 2.6 3.1 2.7 3.6 3.1c.5.4 2.7 1.6 4.8 2 .7.1 1.3.1 1.8.1.6 0 1.7-.2 2-.8.3-.6 1.1-1.1 1.1-2.2 0-1.1-.7-1.7-1-1.9Z" fill="currentColor"/></svg>
          WhatsApp
        </span>
      </button>
    </div>

    <div class="card" style="max-width:720px;margin:0 auto">
      <div class="card-body">
        <!-- ===== WhatsApp Panel ===== -->
        <div class="wa-panel" hidden data-panel="whatsapp">
          <div style="text-align:center;margin-bottom:.75rem">
            <button type="button" class="btn btn--lg" id="btnStartWA" disabled>
              Start WhatsApp
            </button>
            <p class="section-sub" style="margin:.5rem 0 0">
              WhatsApp 번호가 설정되면 이 버튼이 WhatsApp 채팅으로 연결됩니다.
            </p>
          </div>

          <form class="stack gap-sm" id="waForm" novalidate>
            <div class="grid cols-2">
              <label class="field">
                <span class="label">Inquiry Type</span>
                <select name="type">
                  <option>Product</option>
                  <option>Partnership</option>
                  <option>Support</option>
                  <option>Other</option>
                </select>
              </label>
              <label class="field">
                <span class="label">Name</span>
                <input name="name" placeholder="Name">
              </label>
            </div>
            <label class="field">
              <span class="label">Subject</span>
              <input name="subject" placeholder="Subject">
            </label>
            <label class="field">
              <span class="label">Message</span>
              <textarea name="message" rows="5" placeholder="Your message"></textarea>
            </label>
            <label class="chk">
              <input type="checkbox" id="waAgree">
              <span>I agree to the collection and use of personal information.</span>
            </label>
          </form>
        </div>

        <!-- ===== Email Panel ===== -->
        <div class="mail-panel" data-panel="email">
          <form class="stack gap-sm" id="mailForm" novalidate>
            <div class="grid cols-2">
              <label class="field">
                <span class="label">Inquiry Type</span>
                <select name="type">
                  <option>Product</option>
                  <option>Partnership</option>
                  <option>Support</option>
                  <option>Other</option>
                </select>
              </label>
              <label class="field">
                <span class="label">Subject</span>
                <input name="subject" placeholder="Subject">
              </label>
            </div>

            <div class="grid cols-2">
              <label class="field">
                <span class="label">Email</span>
                <input type="email" name="email" placeholder="Email">
              </label>
              <label class="field">
                <span class="label">Phone</span>
                <input name="phone" placeholder="Phone">
              </label>
            </div>

            <label class="field">
              <span class="label">Name</span>
              <input name="name" placeholder="Name">
            </label>

            <label class="field">
              <span class="label">Message</span>
              <textarea name="message" rows="6" placeholder="Your message"></textarea>
            </label>

            <label class="chk">
              <input type="checkbox" id="mailAgree">
              <span>I agree to the collection and use of personal information.</span>
            </label>

            <div style="text-align:center;margin-top:.75rem">
              <button type="submit" class="btn btn--lg">Send Email</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <div data-include="footer"></div>

  <!-- ===== Page-only JS (채널 토글 & WhatsApp 준비 상태) ===== -->
  <script>
    (function(){
      const tabs = document.querySelectorAll('.contact-tabs .chip');
      const panels = {
        email: document.querySelector('[data-panel="email"]'),
        whatsapp: document.querySelector('[data-panel="whatsapp"]')
      };

      function activate(which){
        tabs.forEach(t=>{
          const on = t.dataset.channel === which;
          t.classList.toggle('is-active', on);
          t.setAttribute('aria-selected', on ? 'true':'false');
        });
        panels.email.hidden = which !== 'email';
        panels.whatsapp.hidden = which !== 'whatsapp';
      }

      tabs.forEach(t=> t.addEventListener('click', ()=> activate(t.dataset.channel)));
      activate('email'); // default

      // WhatsApp 설정 (번호 없을 때 비활성)
      const btnWA = document.getElementById('btnStartWA');
      const waNumber = ''; // TODO: 번호 확정 후 '821012345678' 형태로 세팅
      function buildText(){
        const f = document.getElementById('waForm');
        const p = new URLSearchParams(new FormData(f));
        const lines = [
          `Type: ${p.get('type')||''}`,
          `Name: ${p.get('name')||''}`,
          `Subject: ${p.get('subject')||''}`,
          '',
          p.get('message')||''
        ].join('%0A');
        return lines;
      }
      function updateWAState(){
        const agree = document.getElementById('waAgree').checked;
        if(waNumber && agree){
          btnWA.disabled = false;
          btnWA.onclick = ()=> {
            const text = buildText();
            const url = `https://wa.me/${waNumber}?text=${text}`;
            window.open(url, '_blank', 'noopener');
          };
        }else{
          btnWA.disabled = true;
          btnWA.onclick = null;
        }
      }
      document.getElementById('waForm').addEventListener('input', updateWAState);
      document.getElementById('waAgree').addEventListener('change', updateWAState);
      updateWAState();

      // 이메일 전송은 백엔드 연동 전까지는 기본 submit 막기
      document.getElementById('mailForm').addEventListener('submit', (e)=>{
        e.preventDefault();
        alert('Thanks! Email submission backend will be connected soon.');
      });
    })();
  </script>

  <!-- 페이지 전용 미니 스타일(선택) -->
  <style>
    .chip{
      border:1px solid #ddd;border-radius:999px;padding:.5rem 1rem;background:#fff;cursor:pointer;
    }
    .chip.is-active{ background:#111;color:#fff;border-color:#111; }
    .field .label{display:block;font-weight:600;margin-bottom:.35rem}
    .field input,.field select,.field textarea{
      width:100%;padding:.65rem .75rem;border:1px solid #ddd;border-radius:.5rem;
    }
    .chk{display:flex;align-items:flex-start;gap:.5rem;margin-top:.25rem}
    .chk input{margin-top:.2rem}
    .stack.gap-sm>*+*{margin-top:.75rem}
    .grid{display:grid;gap:.75rem}
    .grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    @media (max-width:768px){ .grid.cols-2{grid-template-columns:1fr} }
  </style>
</body>
</html>
