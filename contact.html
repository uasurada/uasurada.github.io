<!DOCTYPE html>
<html lang="en" data-page="contact">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact – Julieta</title>
  <link rel="stylesheet" href="css/style.css" />
  <script src="js/include.js" defer></script>
</head>
<body>
  <!-- Header -->
  <div data-include="header"></div>

  <!-- ===== Hero (배너: 여백 0) ===== -->
  <section class="hero hero--image-only">
    <picture class="hero-picture">
      <source srcset="images/mobile-contact-us-banner.jpg" media="(max-width: 1024px)">
      <img src="images/contact-us-banner.jpg" alt="CONTACT US banner">
    </picture>
  </section>

  <!-- ===== Contact ===== -->
  <section class="container section" id="contact">
    <h2 class="section-title" style="text-align:center">Get in Touch</h2>
    <p class="section-sub" style="text-align:center">Choose your preferred channel</p>

    <!-- Channel Tabs -->
    <div class="contact-tabs" role="tablist" aria-label="Contact channel"
         style="display:flex;gap:.5rem;justify-content:center;margin:1rem 0 1.5rem">
      <button class="chip is-active" role="tab" aria-selected="true" data-channel="email">
        <span style="display:inline-flex;align-items:center;gap:.5rem">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5Z" fill="currentColor"/></svg>
          Email
        </span>
      </button>
      <button class="chip" role="tab" aria-selected="false" data-channel="whatsapp">
        <span style="display:inline-flex;align-items:center;gap:.5rem">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M16.1 13.3c-.3-.2-1.7-.8-2-.9-.3-.1-.5-.2-.7.2s-.8.9-1 .9-.5 0-.9-.4c-.4-.3-1.4-.1-2.7-1.4-1-1-1.6-2.3-1.8-2.7-.2-.4 0-.6.2-.8.2-.2.4-.5.5-.7.2-.2.2-.4.3-.6 0-.2 0-.5-.1-.7-.1-.2-.7-1.7-1-2.3-.3-.6-.6-.5-.8-.5h-.7c-.2 0-.7.1-1 .5-.3.4-1.3 1.3-1.3 3.2s1.4 3.7 1.6 4 .3.8 1.7 2.6 3.1 2.7 3.6 3.1c.5.4 2.7 1.6 4.8 2 .7.1 1.3.1 1.8.1.6 0 1.7-.2 2-.8.3-.6 1.1-1.1 1.1-2.2 0-1.1-.7-1.7-1-1.9Z" fill="currentColor"/></svg>
          WhatsApp
        </span>
      </button>
    </div>

    <div class="card" style="max-width:720px;margin:0 auto">
      <div class="card-body">
        <!-- ===== WhatsApp Panel ===== -->
        <div class="wa-panel" hidden data-panel="whatsapp">
          <form class="stack gap-sm" id="waForm" novalidate>
            <div class="grid cols-2">
              <label class="field">
                <span class="label">Inquiry Type</span>
                <select name="type">
                  <option>Product</option>
                  <option>Partnership</option>
                  <option>Support</option>
                  <option>Other</option>
                </select>
              </label>
              <label class="field">
                <span class="label">Name</span>
                <input name="name" placeholder="Name" required>
              </label>
            </div>
            <label class="field">
              <span class="label">Subject</span>
              <input name="subject" placeholder="Subject">
            </label>
            <label class="field">
              <span class="label">Message</span>
              <textarea name="message" rows="5" placeholder="Your message" required></textarea>
            </label>
            <label class="chk">
              <input type="checkbox" id="waAgree" required>
              <span>I agree to the collection and use of personal information.</span>
            </label>

            <div style="text-align:center">
              <button type="button" class="btn btn--lg" id="btnStartWA">Start WhatsApp</button>
            </div>
          </form>
        </div>

        <!-- ===== Email Panel ===== -->
        <div class="mail-panel" data-panel="email">
          <form class="stack gap-sm" id="mailForm" novalidate>
            <div class="grid cols-2">
              <label class="field">
                <span class="label">Inquiry Type</span>
                <select name="type">
                  <option>Product</option>
                  <option>Partnership</option>
                  <option>Support</option>
                  <option>Other</option>
                </select>
              </label>
              <label class="field">
                <span class="label">Subject</span>
                <input name="subject" placeholder="Subject">
              </label>
            </div>

            <div class="grid cols-2">
              <label class="field">
                <span class="label">Email</span>
                <input type="email" name="email" placeholder="Email" required>
              </label>
              <label class="field">
                <span class="label">Phone</span>
                <input name="phone" placeholder="Phone">
              </label>
            </div>

            <label class="field">
              <span class="label">Name</span>
              <input name="name" placeholder="Name" required>
            </label>

            <label class="field">
              <span class="label">Message</span>
              <textarea name="message" rows="6" placeholder="Your message" required></textarea>
            </label>

            <label class="chk">
              <input type="checkbox" id="mailAgree" required>
              <span>I agree to the collection and use of personal information.</span>
            </label>

            <div style="text-align:center;margin-top:.75rem">
              <button type="submit" class="btn btn--lg">Send Email</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <div data-include="footer"></div>

  <!-- ===== Page-only JS ===== -->
  <script>
    (function () {
      /* ---------- CONFIG: 여기만 채우면 작동 ---------- */
      const CONTACT_EMAIL   = 'MDA.Juliata@gmail.com';     // ← 변경
      const WHATSAPP_NUMBER = '821048388224';            // ← 국가코드+번호(숫자만)

      /* 탭 전환 */
      const tabs = document.querySelectorAll('.contact-tabs .chip');
      const panels = {
        email: document.querySelector('[data-panel="email"]'),
        whatsapp: document.querySelector('[data-panel="whatsapp"]')
      };
      function activate(which){
        tabs.forEach(t=>{
          const on = t.dataset.channel === which;
          t.classList.toggle('is-active', on);
          t.setAttribute('aria-selected', on ? 'true':'false');
        });
        panels.email.hidden = which !== 'email';
        panels.whatsapp.hidden = which !== 'whatsapp';
      }
      tabs.forEach(t=> t.addEventListener('click', ()=> activate(t.dataset.channel)));
      activate('email');

      /* WhatsApp */
      const waForm  = document.getElementById('waForm');
      const waAgree = document.getElementById('waAgree');
      const btnWA   = document.getElementById('btnStartWA');

      function buildWaText(){
        const p = new URLSearchParams(new FormData(waForm));
        const lines = [
          `Type: ${p.get('type')||''}`,
          `Name: ${p.get('name')||''}`,
          `Subject: ${p.get('subject')||''}`,
          '',
          p.get('message')||''
        ].join('\n');
        return encodeURIComponent(lines);
      }
      function canSendWA(){
        return Boolean(WHATSAPP_NUMBER)
          && waAgree.checked
          && waForm.name.value.trim()
          && waForm.message.value.trim();
      }
      function updateWA(){
        btnWA.disabled = !canSendWA();
      }
      waForm.addEventListener('input', updateWA);
      waAgree.addEventListener('change', updateWA);
      updateWA();

      btnWA.addEventListener('click', ()=>{
        if (!canSendWA()) return;
        const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${buildWaText()}`;
        window.open(url, '_blank', 'noopener');
      });

      /* Email (mailto) */
      const mailForm  = document.getElementById('mailForm');
      const mailAgree = document.getElementById('mailAgree');

      function buildMailto(){
        const p = new URLSearchParams(new FormData(mailForm));
        const subject = encodeURIComponent(p.get('subject') || `[${p.get('type')||'Inquiry'}] Julieta`);
        const body = encodeURIComponent(
          [
            `Type: ${p.get('type')||''}`,
            `Name: ${p.get('name')||''}`,
            `Email: ${p.get('email')||''}`,
            `Phone: ${p.get('phone')||''}`,
            '',
            p.get('message')||''
          ].join('\n')
        );
        return `mailto:${CONTACT_EMAIL}?subject=${subject}&body=${body}`;
      }

      mailForm.addEventListener('submit', (e)=>{
        e.preventDefault();
        if (!CONTACT_EMAIL){
          alert('Email address is not configured yet.');
          return;
        }
        const f = mailForm;
        if (!mailAgree.checked || !f.email.value || !f.name.value || !f.message.value){
          alert('Please fill the required fields and agree to the policy.');
          return;
        }
        window.location.href = buildMailto();
      });
    })();
  </script>

  <!-- 페이지 전용 미니 스타일 -->
  <style>
    .chip{border:1px solid #ddd;border-radius:999px;padding:.5rem 1rem;background:#fff;cursor:pointer}
    .chip.is-active{ background:#111;color:#fff;border-color:#111 }
    .field .label{display:block;font-weight:600;margin-bottom:.35rem}
    .field input,.field select,.field textarea{
      width:100%;padding:.65rem .75rem;border:1px solid #ddd;border-radius:.5rem
    }
    .field input:required:invalid,
    .field textarea:required:invalid{ /* 브라우저 기본 빨간 테두리 감춤 */
      box-shadow:none
    }
    .chk{display:flex;align-items:flex-start;gap:.5rem;margin-top:.25rem}
    .chk input{margin-top:.2rem}
    .stack.gap-sm>*+*{margin-top:.75rem}
    .grid{display:grid;gap:.75rem}
    .grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    @media (max-width:768px){ .grid.cols-2{grid-template-columns:1fr} }
  </style>
</body>
</html>
